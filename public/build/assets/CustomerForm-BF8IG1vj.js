import{_ as w,c,a as o,b as _,f as y,d as a,t as p,g as C,r as E,w as S,e as n,v as i,p as V,y as k,n as N,l as A,q as M,i as v,h as T,m as U,S as g,j as q,o as b}from"./app-DTWS8Zmf.js";import{u as j}from"./customer-BgQvdGkx.js";const z={name:"CustomerForm",setup(){const f=M(),e=q(),r=j(),l=A(()=>!!f.params.id),d=v(!1),m=v(null),u=v(null),s=T({first_name:"",last_name:"",document_type:"",document_number:"",email:"",phone:"",address:""}),x=async()=>{if(l.value){d.value=!0;try{const t=await r.fetchCustomer(f.params.id);s.first_name=t.first_name,s.last_name=t.last_name,s.document_type=t.document_type,s.document_number=t.document_number,s.email=t.email,s.phone=t.phone||"",s.address=t.address||""}catch{m.value="Error al cargar el cliente"}finally{d.value=!1}}},D=async()=>{d.value=!0,m.value=null,u.value=null;try{l.value?(await r.updateCustomer(f.params.id,s),g.fire("✅ Actualizada","El cliente fue actualizado exitosamente","success")):(await r.createCustomer(s),g.fire("✅ Actualizada","El cliente fue creado exitosamente","success")),setTimeout(()=>{e.push("/customers")},1500)}catch{m.value=r.error||"Error al guardar el cliente"}finally{d.value=!1}};return U(()=>{x()}),{isEditMode:l,loading:d,error:m,success:u,formData:s,handleSubmit:D}}},I={class:"customer-form"},B={class:"d-flex justify-content-between align-items-center mb-4"},P={key:0,class:"alert alert-danger alert-dismissible fade show"},F={key:1,class:"alert alert-success alert-dismissible fade show"},G={class:"row"},O={class:"col-md-8 mx-auto"},R={class:"card"},H={class:"card-body"},J={class:"row"},K={class:"col-md-6 mb-3"},L=["disabled"],Q={class:"col-md-6 mb-3"},W=["disabled"],X={class:"col-md-6 mb-3"},Y=["disabled"],Z={class:"col-md-6 mb-3"},h=["disabled"],$={class:"col-md-6 mb-3"},ee=["disabled"],oe={class:"col-md-6 mb-3"},le=["disabled"],se={class:"col-12 mb-3"},te=["disabled"],ae={class:"d-flex justify-content-end gap-2 mt-4"},ne=["disabled"],de={key:0},ie={key:1};function re(f,e,r,l,d,m){const u=E("router-link");return b(),c("div",I,[o("div",B,[o("h2",null,[e[10]||(e[10]=o("i",{class:"bi bi-person"},null,-1)),a(" "+p(l.isEditMode?"Editar Cliente":"Nuevo Cliente"),1)]),y(u,{to:"/customers",class:"btn btn-outline-secondary"},{default:C(()=>[...e[11]||(e[11]=[o("i",{class:"bi bi-arrow-left me-2"},null,-1),a(" Volver ",-1)])]),_:1})]),l.error?(b(),c("div",P,[e[12]||(e[12]=o("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),a(" "+p(l.error)+" ",1),o("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=s=>l.error=null)})])):_("",!0),l.success?(b(),c("div",F,[e[13]||(e[13]=o("i",{class:"bi bi-check-circle-fill me-2"},null,-1)),a(" "+p(l.success)+" ",1),o("button",{type:"button",class:"btn-close",onClick:e[1]||(e[1]=s=>l.success=null)})])):_("",!0),o("div",G,[o("div",O,[o("div",R,[e[28]||(e[28]=o("div",{class:"card-header bg-success text-white"},[o("h5",{class:"mb-0"},[o("i",{class:"bi bi-person-badge me-2"}),a(" Información del Cliente ")])],-1)),o("div",H,[o("form",{onSubmit:e[9]||(e[9]=S((...s)=>l.handleSubmit&&l.handleSubmit(...s),["prevent"]))},[o("div",J,[o("div",K,[e[14]||(e[14]=o("label",{class:"form-label"},"Nombre *",-1)),n(o("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=s=>l.formData.first_name=s),placeholder:"Nombre",required:"",disabled:l.loading},null,8,L),[[i,l.formData.first_name]])]),o("div",Q,[e[15]||(e[15]=o("label",{class:"form-label"},"Apellido *",-1)),n(o("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=s=>l.formData.last_name=s),placeholder:"Apellido",required:"",disabled:l.loading},null,8,W),[[i,l.formData.last_name]])]),o("div",X,[e[17]||(e[17]=o("label",{class:"form-label"},"Tipo de Documento *",-1)),n(o("select",{class:"form-select","onUpdate:modelValue":e[4]||(e[4]=s=>l.formData.document_type=s),required:"",disabled:l.loading},[...e[16]||(e[16]=[k('<option value="" data-v-7d2f2112>Seleccionar...</option><option value="CC" data-v-7d2f2112> Cédula de Ciudadanía (CC) </option><option value="NIT" data-v-7d2f2112>NIT</option><option value="CE" data-v-7d2f2112> Cédula de Extranjería (CE) </option><option value="PA" data-v-7d2f2112> Pasaporte (PA) </option>',5)])],8,Y),[[V,l.formData.document_type]])]),o("div",Z,[e[18]||(e[18]=o("label",{class:"form-label"},"Número de Documento *",-1)),n(o("input",{type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=s=>l.formData.document_number=s),placeholder:"1234567890",required:"",disabled:l.loading},null,8,h),[[i,l.formData.document_number]]),e[19]||(e[19]=o("small",{class:"text-muted"}," Sin puntos ni guiones ",-1))]),o("div",$,[e[20]||(e[20]=o("label",{class:"form-label"},"Email *",-1)),n(o("input",{type:"email",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=s=>l.formData.email=s),placeholder:"correo@ejemplo.com",required:"",disabled:l.loading},null,8,ee),[[i,l.formData.email]])]),o("div",oe,[e[21]||(e[21]=o("label",{class:"form-label"},"Teléfono",-1)),n(o("input",{type:"tel",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=s=>l.formData.phone=s),placeholder:"3001234567",disabled:l.loading},null,8,le),[[i,l.formData.phone]]),e[22]||(e[22]=o("small",{class:"text-muted"}," Opcional - 10 dígitos ",-1))]),o("div",se,[e[23]||(e[23]=o("label",{class:"form-label"},"Dirección",-1)),n(o("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":e[8]||(e[8]=s=>l.formData.address=s),placeholder:"Dirección completa...",disabled:l.loading},null,8,te),[[i,l.formData.address]]),e[24]||(e[24]=o("small",{class:"text-muted"}," Opcional ",-1))])]),o("div",ae,[y(u,{to:"/customers",class:N(["btn btn-outline-secondary",{disabled:l.loading}])},{default:C(()=>[...e[25]||(e[25]=[a(" Cancelar ",-1)])]),_:1},8,["class"]),o("button",{type:"submit",class:"btn btn-success",disabled:l.loading},[l.loading?(b(),c("span",de,[...e[26]||(e[26]=[o("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),a(" Guardando... ",-1)])])):(b(),c("span",ie,[e[27]||(e[27]=o("i",{class:"bi bi-save me-2"},null,-1)),a(" "+p(l.isEditMode?"Actualizar":"Guardar")+" Cliente ",1)]))],8,ne)])],32)])])])])])}const ce=w(z,[["render",re],["__scopeId","data-v-7d2f2112"]]);export{ce as default};

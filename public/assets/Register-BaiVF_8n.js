import{_ as C,c as n,a as s,b as y,d as r,t as _,w as D,e as m,v as c,f as R,g as V,r as q,u as M,h as N,i as u,j as S,o as i}from"./app-CBNaHwnX.js";const j={name:"Register",setup(){const f=S(),e=M(),l=N({name:"",email:"",password:"",password_confirmation:""}),o=u(!1),t=u(null),d=u(null);return{formData:l,loading:o,error:t,success:d,handleRegister:async()=>{var a,v,g,w;if(l.password!==l.password_confirmation){t.value="Las contraseñas no coinciden";return}o.value=!0,t.value=null,d.value=null;try{await e.register(l),d.value="Cuenta creada exitosamente. Redirigiendo...",setTimeout(()=>{f.push("/dashboard")},1500)}catch(b){if((v=(a=b.response)==null?void 0:a.data)!=null&&v.errors){const k=b.response.data.errors,x=Object.values(k).flat().join(" ");t.value=x}else t.value=((w=(g=b.response)==null?void 0:g.data)==null?void 0:w.message)||"Error al crear la cuenta. Intenta nuevamente."}finally{o.value=!1}}}}},T={class:"register-container"},U={class:"register-card"},B={key:0,class:"alert alert-danger alert-dismissible fade show",role:"alert"},E={key:1,class:"alert alert-success alert-dismissible fade show",role:"alert"},I={class:"mb-3"},h=["disabled"],A={class:"mb-3"},F=["disabled"],L={class:"mb-3"},O=["disabled"],Y={class:"mb-3"},z=["disabled"],G=["disabled"],H={key:0},J={key:1},K={class:"text-center mb-0"};function P(f,e,l,o,t,d){const p=q("router-link");return i(),n("div",T,[s("div",U,[e[18]||(e[18]=s("div",{class:"text-center mb-4"},[s("i",{class:"bi bi-person-plus register-icon"}),s("h3",{class:"mt-3"},"Crear Cuenta"),s("p",{class:"text-muted"},"Sistema de Facturación")],-1)),o.error?(i(),n("div",B,[e[7]||(e[7]=s("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),r(" "+_(o.error)+" ",1),s("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=a=>o.error=null)})])):y("",!0),o.success?(i(),n("div",E,[e[8]||(e[8]=s("i",{class:"bi bi-check-circle-fill me-2"},null,-1)),r(" "+_(o.success)+" ",1),s("button",{type:"button",class:"btn-close",onClick:e[1]||(e[1]=a=>o.success=null)})])):y("",!0),s("form",{onSubmit:e[6]||(e[6]=D((...a)=>o.handleRegister&&o.handleRegister(...a),["prevent"]))},[s("div",I,[e[9]||(e[9]=s("label",{for:"name",class:"form-label"},[s("i",{class:"bi bi-person"}),r(" Nombre Completo ")],-1)),m(s("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":e[2]||(e[2]=a=>o.formData.name=a),placeholder:"Tu nombre completo",required:"",disabled:o.loading},null,8,h),[[c,o.formData.name]])]),s("div",A,[e[10]||(e[10]=s("label",{for:"email",class:"form-label"},[s("i",{class:"bi bi-envelope"}),r(" Email ")],-1)),m(s("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":e[3]||(e[3]=a=>o.formData.email=a),placeholder:"correo@ejemplo.com",required:"",disabled:o.loading},null,8,F),[[c,o.formData.email]])]),s("div",L,[e[11]||(e[11]=s("label",{for:"password",class:"form-label"},[s("i",{class:"bi bi-lock"}),r(" Contraseña ")],-1)),m(s("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":e[4]||(e[4]=a=>o.formData.password=a),placeholder:"Mínimo 8 caracteres",required:"",minlength:"8",disabled:o.loading},null,8,O),[[c,o.formData.password]]),e[12]||(e[12]=s("small",{class:"text-muted"},"Mínimo 8 caracteres",-1))]),s("div",Y,[e[13]||(e[13]=s("label",{for:"password_confirmation",class:"form-label"},[s("i",{class:"bi bi-lock-fill"}),r(" Confirmar Contraseña ")],-1)),m(s("input",{type:"password",class:"form-control",id:"password_confirmation","onUpdate:modelValue":e[5]||(e[5]=a=>o.formData.password_confirmation=a),placeholder:"Repite tu contraseña",required:"",disabled:o.loading},null,8,z),[[c,o.formData.password_confirmation]])]),s("button",{type:"submit",class:"btn btn-primary w-100 mb-3",disabled:o.loading},[o.loading?(i(),n("span",H,[...e[14]||(e[14]=[s("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),r(" Registrando... ",-1)])])):(i(),n("span",J,[...e[15]||(e[15]=[s("i",{class:"bi bi-person-check me-2"},null,-1),r(" Crear Cuenta ",-1)])]))],8,G),s("p",K,[e[17]||(e[17]=r(" ¿Ya tienes cuenta? ",-1)),R(p,{to:"/login",class:"text-decoration-none"},{default:V(()=>[...e[16]||(e[16]=[r(" Inicia sesión aquí ",-1)])]),_:1})])],32)])])}const W=C(j,[["render",P],["__scopeId","data-v-5a0ab2c4"]]);export{W as default};

import{_ as k,c as r,a as s,d as i,t as a,f as u,g as b,r as C,F as N,k as S,u as D,l as p,i as y,m as F,j as V,o as c,n as T}from"./app-CBNaHwnX.js";import{u as B}from"./invoice-BP9D02IR.js";const E={name:"Dashboard",setup(){const h=V(),t=D(),_=B(),n=p(()=>t.user),v=y(!1),l=y([]),d=p(()=>({totalInvoices:l.value.length,pendingInvoices:l.value.filter(e=>e.status==="pending").length,paidInvoices:l.value.filter(e=>e.status==="paid").length,overdueInvoices:l.value.filter(e=>e.status==="overdue").length})),m=async()=>{v.value=!0;try{await _.fetchInvoices(1),l.value=_.invoices.slice(0,10)}catch(e){console.error("Error al cargar facturas:",e)}finally{v.value=!1}},o=e=>new Date(e).toLocaleDateString("es-CO"),g=e=>new Intl.NumberFormat("es-CO").format(e),f=e=>({pending:"badge bg-warning text-dark",paid:"badge bg-success",overdue:"badge bg-danger"})[e]||"badge bg-secondary",x=e=>({pending:"Pendiente",paid:"Pagada",overdue:"Vencida"})[e]||e,w=e=>{h.push(`/invoices/${e}`)};return F(()=>{m()}),{user:n,loading:v,stats:d,recentInvoices:l,formatDate:o,formatNumber:g,getStatusClass:f,getStatusText:x,goToInvoice:w}}},P={class:"dashboard"},R={class:"d-flex justify-content-between align-items-center mb-4"},j={class:"text-muted"},z={class:"row mb-4"},A={class:"col-md-3 mb-3"},L={class:"stat-card bg-primary text-white"},M={class:"stat-content"},O={class:"col-md-3 mb-3"},q={class:"stat-card bg-warning text-white"},G={class:"stat-content"},H={class:"col-md-3 mb-3"},J={class:"stat-card bg-success text-white"},K={class:"stat-content"},Q={class:"col-md-3 mb-3"},U={class:"stat-card bg-danger text-white"},W={class:"stat-content"},X={class:"row mb-4"},Y={class:"col-12"},Z={class:"card"},$={class:"card-body"},ss={class:"row"},ts={class:"col-md-4 mb-2"},es={class:"col-md-4 mb-2"},ns={class:"col-md-4 mb-2"},os={class:"row"},as={class:"col-12"},is={class:"card"},ls={class:"card-header bg-white d-flex justify-content-between align-items-center"},ds={class:"card-body"},rs={key:0,class:"text-center py-5"},cs={key:1,class:"text-center py-5 text-muted"},us={key:2,class:"table-responsive"},bs={class:"table table-hover"},vs=["onClick"];function ms(h,t,_,n,v,l){var m;const d=C("router-link");return c(),r("div",P,[s("div",R,[t[0]||(t[0]=s("h2",null,[s("i",{class:"bi bi-speedometer2"}),i(" Dashboard")],-1)),s("span",j,"Bienvenido, "+a((m=n.user)==null?void 0:m.name),1)]),s("div",z,[s("div",A,[s("div",L,[t[2]||(t[2]=s("div",{class:"stat-icon"},[s("i",{class:"bi bi-receipt"})],-1)),s("div",M,[s("h3",null,a(n.stats.totalInvoices),1),t[1]||(t[1]=s("p",null,"Total Facturas",-1))])])]),s("div",O,[s("div",q,[t[4]||(t[4]=s("div",{class:"stat-icon"},[s("i",{class:"bi bi-clock-history"})],-1)),s("div",G,[s("h3",null,a(n.stats.pendingInvoices),1),t[3]||(t[3]=s("p",null,"Pendientes",-1))])])]),s("div",H,[s("div",J,[t[6]||(t[6]=s("div",{class:"stat-icon"},[s("i",{class:"bi bi-check-circle"})],-1)),s("div",K,[s("h3",null,a(n.stats.paidInvoices),1),t[5]||(t[5]=s("p",null,"Pagadas",-1))])])]),s("div",Q,[s("div",U,[t[8]||(t[8]=s("div",{class:"stat-icon"},[s("i",{class:"bi bi-exclamation-triangle"})],-1)),s("div",W,[s("h3",null,a(n.stats.overdueInvoices),1),t[7]||(t[7]=s("p",null,"Vencidas",-1))])])])]),s("div",X,[s("div",Y,[s("div",Z,[t[12]||(t[12]=s("div",{class:"card-header bg-white"},[s("h5",{class:"mb-0"},[s("i",{class:"bi bi-lightning-charge"}),i(" Acciones Rápidas ")])],-1)),s("div",$,[s("div",ss,[s("div",ts,[u(d,{to:"/invoices/create",class:"btn btn-primary w-100"},{default:b(()=>[...t[9]||(t[9]=[s("i",{class:"bi bi-plus-circle me-2"},null,-1),i(" Nueva Factura ",-1)])]),_:1})]),s("div",es,[u(d,{to:"/customers/create",class:"btn btn-success w-100"},{default:b(()=>[...t[10]||(t[10]=[s("i",{class:"bi bi-person-plus me-2"},null,-1),i(" Nuevo Cliente ",-1)])]),_:1})]),s("div",ns,[u(d,{to:"/invoices",class:"btn btn-info w-100"},{default:b(()=>[...t[11]||(t[11]=[s("i",{class:"bi bi-search me-2"},null,-1),i(" Ver Facturas ",-1)])]),_:1})])])])])])]),s("div",os,[s("div",as,[s("div",is,[s("div",ls,[t[14]||(t[14]=s("h5",{class:"mb-0"},[s("i",{class:"bi bi-clock-history"}),i(" Facturas Recientes ")],-1)),u(d,{to:"/invoices",class:"btn btn-sm btn-outline-primary"},{default:b(()=>[...t[13]||(t[13]=[i(" Ver todas ",-1)])]),_:1})]),s("div",ds,[n.loading?(c(),r("div",rs,[...t[15]||(t[15]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Cargando...")],-1)])])):n.recentInvoices.length===0?(c(),r("div",cs,[t[17]||(t[17]=s("i",{class:"bi bi-inbox",style:{"font-size":"3rem"}},null,-1)),t[18]||(t[18]=s("p",{class:"mt-3"},"No hay facturas registradas",-1)),u(d,{to:"/invoices/create",class:"btn btn-primary"},{default:b(()=>[...t[16]||(t[16]=[i(" Crear primera factura ",-1)])]),_:1})])):(c(),r("div",us,[s("table",bs,[t[19]||(t[19]=s("thead",null,[s("tr",null,[s("th",null,"Número"),s("th",null,"Cliente"),s("th",null,"Fecha Emisión"),s("th",null,"Vencimiento"),s("th",null,"Monto"),s("th",null,"Estado")])],-1)),s("tbody",null,[(c(!0),r(N,null,S(n.recentInvoices,o=>{var g;return c(),r("tr",{key:o.id,onClick:f=>n.goToInvoice(o.id),style:{cursor:"pointer"}},[s("td",null,[s("strong",null,a(o.invoice_number),1)]),s("td",null,a((g=o.customer)==null?void 0:g.full_name),1),s("td",null,a(n.formatDate(o.issue_date)),1),s("td",null,a(n.formatDate(o.due_date)),1),s("td",null,[s("strong",null,"$"+a(n.formatNumber(o.total_amount)),1)]),s("td",null,[s("span",{class:T(n.getStatusClass(o.status))},a(n.getStatusText(o.status)),3)])],8,vs)}),128))])])]))])])])])])}const hs=k(E,[["render",ms],["__scopeId","data-v-f5c50073"]]);export{hs as default};
